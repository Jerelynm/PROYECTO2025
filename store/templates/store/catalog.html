{% extends 'store/base.html' %}

{% block title %}Catálogo de Productos{% endblock %}

{% block content %}
<h2 style="text-align:center;">Catálogo de Productos</h2>

<!-- Para mostrar un boton de buscar/ aca se utiliza js -->
<input type="text" id="searchInput" placeholder="Buscar producto..."
       style="width:50%;margin:10px auto;display:block;padding:8px;border:1px solid #ccc;border-radius:5px;">


<!-- Para mostrar filtros -->
{% if selected_category %}
<p style="text-align:center;"><strong>Categoría:</strong> {{ selected_category }}</p>
{% elif selected_brand %}
<p style="text-align:center;"><strong>Marca:</strong> {{ selected_brand }}</p>
{% endif %}


<table style="width:100%; border-collapse:collapse;">
    <thead>
    <tr style="background-color:#0078D7; color:white;">
        <th style="padding:8px;">Producto</th>
        <th>Marca</th>
        <th>Categoría</th>
        <th>Precio (Q)</th>
        <th>Stock</th>
    </tr>
    </thead>
    <tbody>
    {% for p in products %}
        <tr style="border-bottom:1px solid #ddd;">
            <td style="padding:6px;">
    <a href="/store/product/{{ p.slug }}/" style="color:#0078D7; text-decoration:none;">{{ p.name }}</a>
</td>
            <td>{{ p.brand.name }}</td>
            <td>{{ p.category.name }}</td>
            <td>Q{{ p.price }}</td>
            <td>{{ p.stock }}</td>
        </tr>
    {% empty %}
        <tr><td colspan="5" style="text-align:center;">No hay productos disponibles.</td></tr>
    {% endfor %}
    </tbody>
</table>
<!-- porción de cod js -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const input = document.getElementById("searchInput");
    const rows = document.querySelectorAll("tbody tr");

    input.addEventListener("keyup", function() {
        const query = input.value.toLowerCase();
        rows.forEach(row => {
            const text = row.innerText.toLowerCase();
            row.style.display = text.includes(query) ? "" : "none";
        });
    });
});
</script>
{% endblock %}